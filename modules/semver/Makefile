SEMVERSIONS :=

SEMVERSION_COMMIT_SHORT = $(GIT_LATEST_TAG)-sha.$(GIT_COMMIT_SHORT)
SEMVERSIONS += $(SEMVERSION_COMMIT_SHORT)

SEMVERSION_COMMIT = $(GIT_LATEST_TAG)-sha.$(GIT_COMMIT)
SEMVERSIONS += $(SEMVERSION_COMMIT)

SEMVERSION_TAG =
ifeq ($(GIT_IS_TAG),1)
	SEMVERSION_TAG = $(GIT_LATEST_TAG)
	SEMVERSIONS += $(SEMVERSION_TAG)
endif

SEMVERSION_BRANCH=
SEMVERSION_BRANCH_COMMIT_SHORT=
SEMVERSION_BRANCH_COMMIT=
ifeq ($(GIT_IS_BRANCH),1)
	SEMVERSION_BRANCH = $(GIT_LATEST_TAG)-$(GIT_BRANCH)
	SEMVERSIONS += $(SEMVERSION_BRANCH)

	SEMVERSION_BRANCH_COMMIT_SHORT = $(GIT_LATEST_TAG)-$(GIT_BRANCH).$(GIT_COMMIT_SHORT)
	SEMVERSIONS += $(SEMVERSION_BRANCH_COMMIT_SHORT)

	SEMVERSION_BRANCH_COMMIT = $(GIT_LATEST_TAG)-$(GIT_BRANCH).$(GIT_COMMIT)
	SEMVERSIONS += $(SEMVERSION_BRANCH_COMMIT)
endif

export SEMVERSION ?= $(word 1,$(SEMVERSIONS))

define semver_vars_export
SEMVERSION_COMMIT_SHORT=$(SEMVERSION_COMMIT_SHORT)
SEMVERSION_COMMIT=$(SEMVERSION_COMMIT)
SEMVERSION_BRANCH=$(SEMVERSION_BRANCH)
SEMVERSION_BRANCH_COMMIT_SHORT=$(SEMVERSION_BRANCH_COMMIT_SHORT)
SEMVERSION_BRANCH_COMMIT=$(SEMVERSION_BRANCH_COMMIT)
SEMVERSION_TAG=$(SEMVERSION_TAG)
endef

export semver_vars_export

## Show
semver\:show:
	@for version in $(SEMVERSIONS) ; do \
		echo "$$version"; \
	done

## Export semver vars
semver\:export:
	@echo "$$semver_vars_export"