name: readme/build
on: [pull_request]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@master
    - run: make readme/deps
    - run: make readme
    - run: git config user.name "$(git --no-pager log --format=format:'%an' -n 1)"
    - run: git config user.email "$(git --no-pager log --format=format:'%ae' -n 1)"
    - run: git remote set-url origin "https://${{GITHUB_ACTOR}}:${{GITHUB_TOKEN}}@github.com/${{GITHUB_REPOSITORY}}.git"
    - run: git status
    - run: git diff
